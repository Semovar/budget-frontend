import{s as Pe,d as $,i as N,b as f,l as U,m as Je,g as q,c as F,e as O,o as me,j as R,h as V,p as Ke,f as W,t as X,u as ne,v as ae,n as ye,r as Se,q as Qe,a as re,w as We,x as Me}from"../chunks/zcCs4naO.js";import{S as Xe,i as Ze,d as G,t as A,a as L,c as Be,m as J,b as K,e as Q,f as le,g as Ie}from"../chunks/CfCKwUYM.js";import{e as Ue}from"../chunks/im_KIqQT.js";import{a as he,t as oe,g as ve}from"../chunks/Droe60yk.js";import{f as Te,a as Fe}from"../chunks/DAsLgBMN.js";import{B as fe}from"../chunks/Dx4fLEUM.js";import{C as Ye}from"../chunks/D2Ky6HrB.js";import{M as Ve}from"../chunks/BmRpZZ1K.js";import{I as pe}from"../chunks/BOJ5ACe9.js";import{S as we}from"../chunks/DK2GGeIu.js";function qe(n,e,t){const a=n.slice();return a[47]=e[t],a}function xe(n){let e;return{c(){e=X("+ –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é")},l(t){e=W(t,"+ –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é")},m(t,a){N(t,e,a)},d(t){t&&$(e)}}}function et(n){let e;return{c(){e=X("–ü—Ä–∏–º–µ–Ω–∏—Ç—å")},l(t){e=W(t,"–ü—Ä–∏–º–µ–Ω–∏—Ç—å")},m(t,a){N(t,e,a)},d(t){t&&$(e)}}}function tt(n){let e,t,a,r,i,l,s,p,d,o,v,w,D;function C(m){n[21](m)}let M={label:"–î–∞—Ç–∞ –æ—Ç",type:"date"};n[8]!==void 0&&(M.value=n[8]),t=new pe({props:M}),ne.push(()=>le(t,"value",C));function B(m){n[22](m)}let j={label:"–î–∞—Ç–∞ –¥–æ",type:"date"};n[9]!==void 0&&(j.value=n[9]),i=new pe({props:j}),ne.push(()=>le(i,"value",B));function T(m){n[23](m)}let E={label:"–°—á–µ—Ç",options:[{value:"",label:"–í—Å–µ —Å—á–µ—Ç–∞"},...n[1].map(je)]};return n[10]!==void 0&&(E.value=n[10]),p=new we({props:E}),ne.push(()=>le(p,"value",T)),w=new fe({props:{variant:"primary",$$slots:{default:[et]},$$scope:{ctx:n}}}),w.$on("click",n[17]),{c(){e=V("div"),Q(t.$$.fragment),r=R(),Q(i.$$.fragment),s=R(),Q(p.$$.fragment),o=R(),v=V("div"),Q(w.$$.fragment),this.h()},l(m){e=F(m,"DIV",{class:!0});var u=O(e);K(t.$$.fragment,u),r=q(u),K(i.$$.fragment,u),s=q(u),K(p.$$.fragment,u),o=q(u),v=F(u,"DIV",{class:!0});var _=O(v);K(w.$$.fragment,_),_.forEach($),u.forEach($),this.h()},h(){U(v,"class","flex items-end"),U(e,"class","grid grid-cols-1 gap-4 sm:grid-cols-4")},m(m,u){N(m,e,u),J(t,e,null),f(e,r),J(i,e,null),f(e,s),J(p,e,null),f(e,o),f(e,v),J(w,v,null),D=!0},p(m,u){const _={};!a&&u[0]&256&&(a=!0,_.value=m[8],ae(()=>a=!1)),t.$set(_);const b={};!l&&u[0]&512&&(l=!0,b.value=m[9],ae(()=>l=!1)),i.$set(b);const k={};u[0]&2&&(k.options=[{value:"",label:"–í—Å–µ —Å—á–µ—Ç–∞"},...m[1].map(je)]),!d&&u[0]&1024&&(d=!0,k.value=m[10],ae(()=>d=!1)),p.$set(k);const y={};u[1]&524288&&(y.$$scope={dirty:u,ctx:m}),w.$set(y)},i(m){D||(L(t.$$.fragment,m),L(i.$$.fragment,m),L(p.$$.fragment,m),L(w.$$.fragment,m),D=!0)},o(m){A(t.$$.fragment,m),A(i.$$.fragment,m),A(p.$$.fragment,m),A(w.$$.fragment,m),D=!1},d(m){m&&$(e),G(t),G(i),G(p),G(w)}}}function nt(n){let e,t;return e=new Ye({props:{$$slots:{default:[it]},$$scope:{ctx:n}}}),{c(){Q(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p(a,r){const i={};r[0]&6151|r[1]&524288&&(i.$$scope={dirty:r,ctx:a}),e.$set(i)},i(a){t||(L(e.$$.fragment,a),t=!0)},o(a){A(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function at(n){let e,t='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div>';return{c(){e=V("div"),e.innerHTML=t,this.h()},l(a){e=F(a,"DIV",{class:!0,"data-svelte-h":!0}),me(e)!=="svelte-19fpjb6"&&(e.innerHTML=t),this.h()},h(){U(e,"class","flex items-center justify-center h-64")},m(a,r){N(a,e,r)},p:ye,i:ye,o:ye,d(a){a&&$(e)}}}function lt(n){let e;return{c(){e=X("-")},l(t){e=W(t,"-")},m(t,a){N(t,e,a)},p:ye,d(t){t&&$(e)}}}function st(n){var r;let e=(((r=n[2].find(a))==null?void 0:r.name)||"-")+"",t;function a(...i){return n[25](n[47],...i)}return{c(){t=X(e)},l(i){t=W(i,e)},m(i,l){N(i,t,l)},p(i,l){var s;n=i,l[0]&5&&e!==(e=(((s=n[2].find(a))==null?void 0:s.name)||"-")+"")&&re(t,e)},d(i){i&&$(t)}}}function rt(n){var l;let e,t,a=(((l=n[2].find(i))==null?void 0:l.name)||"ML –∫–∞—Ç–µ–≥–æ—Ä–∏—è")+"",r;function i(...s){return n[24](n[47],...s)}return{c(){e=V("span"),t=X("ü§ñ "),r=X(a),this.h()},l(s){e=F(s,"SPAN",{class:!0});var p=O(e);t=W(p,"ü§ñ "),r=W(p,a),p.forEach($),this.h()},h(){U(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800")},m(s,p){N(s,e,p),f(e,t),f(e,r)},p(s,p){var d;n=s,p[0]&5&&a!==(a=(((d=n[2].find(i))==null?void 0:d.name)||"ML –∫–∞—Ç–µ–≥–æ—Ä–∏—è")+"")&&re(r,a)},d(s){s&&$(e)}}}function Re(n){var $e;let e,t,a=Fe(n[47].transaction_date)+"",r,i,l,s=Te(n[47].amount,n[47].currency||"RUB")+"",p,d,o,v,w=(n[47].description||"-")+"",D,C,M,B,j,T=((($e=n[1].find(se))==null?void 0:$e.account_name)||"-")+"",E,m,u,_,b="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",k,y,h="–£–¥–∞–ª–∏—Ç—å",I,P,Y;function z(ee,H){return ee[47].predicted_category_id?rt:ee[47].category_id?st:lt}let Z=z(n),x=Z(n);function se(...ee){return n[26](n[47],...ee)}function be(){return n[27](n[47])}function ge(){return n[28](n[47])}return{c(){e=V("tr"),t=V("td"),r=X(a),i=R(),l=V("td"),p=X(s),o=R(),v=V("td"),D=X(w),C=R(),M=V("td"),x.c(),B=R(),j=V("td"),E=X(T),m=R(),u=V("td"),_=V("button"),_.textContent=b,k=R(),y=V("button"),y.textContent=h,I=R(),this.h()},l(ee){e=F(ee,"TR",{class:!0});var H=O(e);t=F(H,"TD",{class:!0});var ue=O(t);r=W(ue,a),ue.forEach($),i=q(H),l=F(H,"TD",{class:!0});var g=O(l);p=W(g,s),g.forEach($),o=q(H),v=F(H,"TD",{class:!0});var S=O(v);D=W(S,w),S.forEach($),C=q(H),M=F(H,"TD",{class:!0});var ce=O(M);x.l(ce),ce.forEach($),B=q(H),j=F(H,"TD",{class:!0});var _e=O(j);E=W(_e,T),_e.forEach($),m=q(H),u=F(H,"TD",{class:!0});var ie=O(u);_=F(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),me(_)!=="svelte-nc7gl7"&&(_.textContent=b),k=q(ie),y=F(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),me(y)!=="svelte-w5pw51"&&(y.textContent=h),ie.forEach($),I=q(H),H.forEach($),this.h()},h(){U(t,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),U(l,"class",d="px-6 py-4 whitespace-nowrap text-sm font-medium "+(n[47].amount>=0?"text-green-600":"text-red-600")),U(v,"class","px-6 py-4 text-sm text-gray-900"),U(M,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),U(j,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),U(_,"class","text-primary-600 hover:text-primary-900 mr-4"),U(y,"class","text-red-600 hover:text-red-900"),U(u,"class","px-6 py-4 whitespace-nowrap text-sm font-medium"),U(e,"class","hover:bg-gray-50")},m(ee,H){N(ee,e,H),f(e,t),f(t,r),f(e,i),f(e,l),f(l,p),f(e,o),f(e,v),f(v,D),f(e,C),f(e,M),x.m(M,null),f(e,B),f(e,j),f(j,E),f(e,m),f(e,u),f(u,_),f(u,k),f(u,y),f(e,I),P||(Y=[Me(_,"click",be),Me(y,"click",ge)],P=!0)},p(ee,H){var ue;n=ee,H[0]&1&&a!==(a=Fe(n[47].transaction_date)+"")&&re(r,a),H[0]&1&&s!==(s=Te(n[47].amount,n[47].currency||"RUB")+"")&&re(p,s),H[0]&1&&d!==(d="px-6 py-4 whitespace-nowrap text-sm font-medium "+(n[47].amount>=0?"text-green-600":"text-red-600"))&&U(l,"class",d),H[0]&1&&w!==(w=(n[47].description||"-")+"")&&re(D,w),Z===(Z=z(n))&&x?x.p(n,H):(x.d(1),x=Z(n),x&&(x.c(),x.m(M,null))),H[0]&3&&T!==(T=(((ue=n[1].find(se))==null?void 0:ue.account_name)||"-")+"")&&re(E,T)},d(ee){ee&&$(e),x.d(),P=!1,We(Y)}}}function ut(n){let e;return{c(){e=X("–ù–∞–∑–∞–¥")},l(t){e=W(t,"–ù–∞–∑–∞–¥")},m(t,a){N(t,e,a)},d(t){t&&$(e)}}}function ot(n){let e;return{c(){e=X("–í–ø–µ—Ä–µ–¥")},l(t){e=W(t,"–í–ø–µ—Ä–µ–¥")},m(t,a){N(t,e,a)},d(t){t&&$(e)}}}function it(n){let e,t,a,r='<tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">–î–∞—Ç–∞</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">–°—É–º–º–∞</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">–û–ø–∏—Å–∞–Ω–∏–µ</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">–°—á–µ—Ç</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">–î–µ–π—Å—Ç–≤–∏—è</th></tr>',i,l,s,p,d,o,v=n[11]+1+"",w,D,C=Math.min(n[11]+de,n[12])+"",M,B,j,T,E,m,u,_,b,k=Ue(n[0]),y=[];for(let h=0;h<k.length;h+=1)y[h]=Re(qe(n,k,h));return m=new fe({props:{variant:"secondary",disabled:n[11]===0,$$slots:{default:[ut]},$$scope:{ctx:n}}}),m.$on("click",n[29]),_=new fe({props:{variant:"secondary",disabled:n[11]+de>=n[12],$$slots:{default:[ot]},$$scope:{ctx:n}}}),_.$on("click",n[30]),{c(){e=V("div"),t=V("table"),a=V("thead"),a.innerHTML=r,i=R(),l=V("tbody");for(let h=0;h<y.length;h+=1)y[h].c();s=R(),p=V("div"),d=V("div"),o=X("–ü–æ–∫–∞–∑–∞–Ω–æ "),w=X(v),D=X(" - "),M=X(C),B=X(" –∏–∑ "),j=X(n[12]),T=R(),E=V("div"),Q(m.$$.fragment),u=R(),Q(_.$$.fragment),this.h()},l(h){e=F(h,"DIV",{class:!0});var I=O(e);t=F(I,"TABLE",{class:!0});var P=O(t);a=F(P,"THEAD",{class:!0,"data-svelte-h":!0}),me(a)!=="svelte-1sfoa80"&&(a.innerHTML=r),i=q(P),l=F(P,"TBODY",{class:!0});var Y=O(l);for(let se=0;se<y.length;se+=1)y[se].l(Y);Y.forEach($),P.forEach($),I.forEach($),s=q(h),p=F(h,"DIV",{class:!0});var z=O(p);d=F(z,"DIV",{class:!0});var Z=O(d);o=W(Z,"–ü–æ–∫–∞–∑–∞–Ω–æ "),w=W(Z,v),D=W(Z," - "),M=W(Z,C),B=W(Z," –∏–∑ "),j=W(Z,n[12]),Z.forEach($),T=q(z),E=F(z,"DIV",{class:!0});var x=O(E);K(m.$$.fragment,x),u=q(x),K(_.$$.fragment,x),x.forEach($),z.forEach($),this.h()},h(){U(a,"class","bg-gray-50"),U(l,"class","bg-white divide-y divide-gray-200"),U(t,"class","min-w-full divide-y divide-gray-200"),U(e,"class","overflow-x-auto"),U(d,"class","text-sm text-gray-700"),U(E,"class","flex space-x-2"),U(p,"class","mt-4 flex items-center justify-between")},m(h,I){N(h,e,I),f(e,t),f(t,a),f(t,i),f(t,l);for(let P=0;P<y.length;P+=1)y[P]&&y[P].m(l,null);N(h,s,I),N(h,p,I),f(p,d),f(d,o),f(d,w),f(d,D),f(d,M),f(d,B),f(d,j),f(p,T),f(p,E),J(m,E,null),f(E,u),J(_,E,null),b=!0},p(h,I){if(I[0]&81927){k=Ue(h[0]);let z;for(z=0;z<k.length;z+=1){const Z=qe(h,k,z);y[z]?y[z].p(Z,I):(y[z]=Re(Z),y[z].c(),y[z].m(l,null))}for(;z<y.length;z+=1)y[z].d(1);y.length=k.length}(!b||I[0]&2048)&&v!==(v=h[11]+1+"")&&re(w,v),(!b||I[0]&6144)&&C!==(C=Math.min(h[11]+de,h[12])+"")&&re(M,C),(!b||I[0]&4096)&&re(j,h[12]);const P={};I[0]&2048&&(P.disabled=h[11]===0),I[1]&524288&&(P.$$scope={dirty:I,ctx:h}),m.$set(P);const Y={};I[0]&6144&&(Y.disabled=h[11]+de>=h[12]),I[1]&524288&&(Y.$$scope={dirty:I,ctx:h}),_.$set(Y)},i(h){b||(L(m.$$.fragment,h),L(_.$$.fragment,h),b=!0)},o(h){A(m.$$.fragment,h),A(_.$$.fragment,h),b=!1},d(h){h&&($(e),$(s),$(p)),Qe(y,h),G(m),G(_)}}}function Le(n){let e,t,a,r="–°—É–º–º–∞",i,l,s=Te(n[6].amount,n[6].currency||"RUB")+"",p,d,o,v,w="–û–ø–∏—Å–∞–Ω–∏–µ",D,C,M=(n[6].description||"-")+"",B,j,T,E,m;function u(b){n[32](b)}let _={label:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è",options:[{value:"",label:"–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"},...n[20](n[6].amount||0).map(He)]};return n[6].category_id!==void 0&&(_.value=n[6].category_id),T=new we({props:_}),ne.push(()=>le(T,"value",u)),{c(){e=V("div"),t=V("div"),a=V("label"),a.textContent=r,i=R(),l=V("p"),p=X(s),d=R(),o=V("div"),v=V("label"),v.textContent=w,D=R(),C=V("p"),B=X(M),j=R(),Q(T.$$.fragment),this.h()},l(b){e=F(b,"DIV",{class:!0});var k=O(e);t=F(k,"DIV",{});var y=O(t);a=F(y,"LABEL",{class:!0,"data-svelte-h":!0}),me(a)!=="svelte-14aab3v"&&(a.textContent=r),i=q(y),l=F(y,"P",{class:!0});var h=O(l);p=W(h,s),h.forEach($),y.forEach($),d=q(k),o=F(k,"DIV",{});var I=O(o);v=F(I,"LABEL",{class:!0,"data-svelte-h":!0}),me(v)!=="svelte-1907cfn"&&(v.textContent=w),D=q(I),C=F(I,"P",{});var P=O(C);B=W(P,M),P.forEach($),I.forEach($),j=q(k),K(T.$$.fragment,k),k.forEach($),this.h()},h(){U(a,"class","block text-sm font-medium text-gray-700 mb-1"),U(l,"class","text-lg font-semibold"),U(v,"class","block text-sm font-medium text-gray-700 mb-1"),U(e,"class","space-y-4")},m(b,k){N(b,e,k),f(e,t),f(t,a),f(t,i),f(t,l),f(l,p),f(e,d),f(e,o),f(o,v),f(o,D),f(o,C),f(C,B),f(e,j),J(T,e,null),m=!0},p(b,k){(!m||k[0]&64)&&s!==(s=Te(b[6].amount,b[6].currency||"RUB")+"")&&re(p,s),(!m||k[0]&64)&&M!==(M=(b[6].description||"-")+"")&&re(B,M);const y={};k[0]&64&&(y.options=[{value:"",label:"–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"},...b[20](b[6].amount||0).map(He)]),!E&&k[0]&64&&(E=!0,y.value=b[6].category_id,ae(()=>E=!1)),T.$set(y)},i(b){m||(L(T.$$.fragment,b),m=!0)},o(b){A(T.$$.fragment,b),m=!1},d(b){b&&$(e),G(T)}}}function ct(n){let e,t,a=n[6]&&Le(n);return{c(){a&&a.c(),e=Se()},l(r){a&&a.l(r),e=Se()},m(r,i){a&&a.m(r,i),N(r,e,i),t=!0},p(r,i){r[6]?a?(a.p(r,i),i[0]&64&&L(a,1)):(a=Le(r),a.c(),L(a,1),a.m(e.parentNode,e)):a&&(Ie(),A(a,1,1,()=>{a=null}),Be())},i(r){t||(L(a),t=!0)},o(r){A(a),t=!1},d(r){r&&$(e),a&&a.d(r)}}}function ft(n){let e;return{c(){e=X("–û—Ç–º–µ–Ω–∞")},l(t){e=W(t,"–û—Ç–º–µ–Ω–∞")},m(t,a){N(t,e,a)},d(t){t&&$(e)}}}function _t(n){let e;return{c(){e=X("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")},l(t){e=W(t,"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")},m(t,a){N(t,e,a)},d(t){t&&$(e)}}}function pt(n){let e,t,a,r,i;return t=new fe({props:{variant:"secondary",$$slots:{default:[ft]},$$scope:{ctx:n}}}),t.$on("click",n[31]),r=new fe({props:{variant:"primary",$$slots:{default:[_t]},$$scope:{ctx:n}}}),r.$on("click",n[15]),{c(){e=V("div"),Q(t.$$.fragment),a=R(),Q(r.$$.fragment),this.h()},l(l){e=F(l,"DIV",{slot:!0,class:!0});var s=O(e);K(t.$$.fragment,s),a=q(s),K(r.$$.fragment,s),s.forEach($),this.h()},h(){U(e,"slot","footer"),U(e,"class","flex justify-end space-x-2")},m(l,s){N(l,e,s),J(t,e,null),f(e,a),J(r,e,null),i=!0},p(l,s){const p={};s[1]&524288&&(p.$$scope={dirty:s,ctx:l}),t.$set(p);const d={};s[1]&524288&&(d.$$scope={dirty:s,ctx:l}),r.$set(d)},i(l){i||(L(t.$$.fragment,l),L(r.$$.fragment,l),i=!0)},o(l){A(t.$$.fragment,l),A(r.$$.fragment,l),i=!1},d(l){l&&$(e),G(t),G(r)}}}function Ae(n){let e,t,a;function r(l){n[38](l)}let i={label:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è",options:[{value:"",label:"–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"},...n[20](parseFloat(n[7].amount)||0).map(Ne)]};return n[7].category_id!==void 0&&(i.value=n[7].category_id),e=new we({props:i}),ne.push(()=>le(e,"value",r)),{c(){Q(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,s){J(e,l,s),a=!0},p(l,s){const p={};s[0]&128&&(p.options=[{value:"",label:"–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"},...l[20](parseFloat(l[7].amount)||0).map(Ne)]),!t&&s[0]&128&&(t=!0,p.value=l[7].category_id,ae(()=>t=!1)),e.$set(p)},i(l){a||(L(e.$$.fragment,l),a=!0)},o(l){A(e.$$.fragment,l),a=!1},d(l){G(e,l)}}}function dt(n){let e,t,a,r,i,l,s,p=n[7].amount,d,o,v,w,D,C,M,B,j,T,E,m,u,_,b,k;function y(g){n[35](g)}let h={label:"–°—á–µ—Ç *",required:!0,options:[{value:"",label:"–í—ã–±–µ—Ä–∏—Ç–µ —Å—á–µ—Ç"},...n[1].map(Oe)]};n[7].account_id!==void 0&&(h.value=n[7].account_id),t=new we({props:h}),ne.push(()=>le(t,"value",y));function I(g){n[36](g)}let P={label:"–°—É–º–º–∞ *",type:"number",step:"0.01",required:!0};n[7].amount!==void 0&&(P.value=n[7].amount),i=new pe({props:P}),ne.push(()=>le(i,"value",I)),i.$on("input",n[37]);let Y=Ae(n);function z(g){n[39](g)}let Z={label:"–î–∞—Ç–∞ *",type:"date",required:!0};n[7].transaction_date!==void 0&&(Z.value=n[7].transaction_date),o=new pe({props:Z}),ne.push(()=>le(o,"value",z));function x(g){n[40](g)}let se={label:"–í—Ä–µ–º—è",type:"time"};n[7].transaction_time!==void 0&&(se.value=n[7].transaction_time),D=new pe({props:se}),ne.push(()=>le(D,"value",x));function be(g){n[41](g)}let ge={label:"–û–ø–∏—Å–∞–Ω–∏–µ",type:"text"};n[7].description!==void 0&&(ge.value=n[7].description),B=new pe({props:ge}),ne.push(()=>le(B,"value",be));function $e(g){n[42](g)}let ee={label:"–í–∞–ª—é—Ç–∞",options:[{value:"RUB",label:"RUB"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"}]};n[7].currency!==void 0&&(ee.value=n[7].currency),E=new we({props:ee}),ne.push(()=>le(E,"value",$e));function H(g){n[43](g)}let ue={label:"–ö—É—Ä—Å –æ–±–º–µ–Ω–∞",type:"number",step:"0.0001"};return n[7].exchange_rate!==void 0&&(ue.value=n[7].exchange_rate),_=new pe({props:ue}),ne.push(()=>le(_,"value",H)),{c(){e=V("div"),Q(t.$$.fragment),r=R(),Q(i.$$.fragment),s=R(),Y.c(),d=R(),Q(o.$$.fragment),w=R(),Q(D.$$.fragment),M=R(),Q(B.$$.fragment),T=R(),Q(E.$$.fragment),u=R(),Q(_.$$.fragment),this.h()},l(g){e=F(g,"DIV",{class:!0});var S=O(e);K(t.$$.fragment,S),r=q(S),K(i.$$.fragment,S),s=q(S),Y.l(S),d=q(S),K(o.$$.fragment,S),w=q(S),K(D.$$.fragment,S),M=q(S),K(B.$$.fragment,S),T=q(S),K(E.$$.fragment,S),u=q(S),K(_.$$.fragment,S),S.forEach($),this.h()},h(){U(e,"class","space-y-4")},m(g,S){N(g,e,S),J(t,e,null),f(e,r),J(i,e,null),f(e,s),Y.m(e,null),f(e,d),J(o,e,null),f(e,w),J(D,e,null),f(e,M),J(B,e,null),f(e,T),J(E,e,null),f(e,u),J(_,e,null),k=!0},p(g,S){const ce={};S[0]&2&&(ce.options=[{value:"",label:"–í—ã–±–µ—Ä–∏—Ç–µ —Å—á–µ—Ç"},...g[1].map(Oe)]),!a&&S[0]&128&&(a=!0,ce.value=g[7].account_id,ae(()=>a=!1)),t.$set(ce);const _e={};!l&&S[0]&128&&(l=!0,_e.value=g[7].amount,ae(()=>l=!1)),i.$set(_e),S[0]&128&&Pe(p,p=g[7].amount)?(Ie(),A(Y,1,1,ye),Be(),Y=Ae(g),Y.c(),L(Y,1),Y.m(e,d)):Y.p(g,S);const ie={};!v&&S[0]&128&&(v=!0,ie.value=g[7].transaction_date,ae(()=>v=!1)),o.$set(ie);const ke={};!C&&S[0]&128&&(C=!0,ke.value=g[7].transaction_time,ae(()=>C=!1)),D.$set(ke);const Ee={};!j&&S[0]&128&&(j=!0,Ee.value=g[7].description,ae(()=>j=!1)),B.$set(Ee);const De={};!m&&S[0]&128&&(m=!0,De.value=g[7].currency,ae(()=>m=!1)),E.$set(De);const Ce={};!b&&S[0]&128&&(b=!0,Ce.value=g[7].exchange_rate,ae(()=>b=!1)),_.$set(Ce)},i(g){k||(L(t.$$.fragment,g),L(i.$$.fragment,g),L(Y),L(o.$$.fragment,g),L(D.$$.fragment,g),L(B.$$.fragment,g),L(E.$$.fragment,g),L(_.$$.fragment,g),k=!0)},o(g){A(t.$$.fragment,g),A(i.$$.fragment,g),A(Y),A(o.$$.fragment,g),A(D.$$.fragment,g),A(B.$$.fragment,g),A(E.$$.fragment,g),A(_.$$.fragment,g),k=!1},d(g){g&&$(e),G(t),G(i),Y.d(g),G(o),G(D),G(B),G(E),G(_)}}}function mt(n){let e;return{c(){e=X("–û—Ç–º–µ–Ω–∞")},l(t){e=W(t,"–û—Ç–º–µ–Ω–∞")},m(t,a){N(t,e,a)},d(t){t&&$(e)}}}function gt(n){let e;return{c(){e=X("–°–æ–∑–¥–∞—Ç—å")},l(t){e=W(t,"–°–æ–∑–¥–∞—Ç—å")},m(t,a){N(t,e,a)},d(t){t&&$(e)}}}function $t(n){let e,t,a,r,i;return t=new fe({props:{variant:"secondary",$$slots:{default:[mt]},$$scope:{ctx:n}}}),t.$on("click",n[34]),r=new fe({props:{variant:"primary",$$slots:{default:[gt]},$$scope:{ctx:n}}}),r.$on("click",n[19]),{c(){e=V("div"),Q(t.$$.fragment),a=R(),Q(r.$$.fragment),this.h()},l(l){e=F(l,"DIV",{slot:!0,class:!0});var s=O(e);K(t.$$.fragment,s),a=q(s),K(r.$$.fragment,s),s.forEach($),this.h()},h(){U(e,"slot","footer"),U(e,"class","flex justify-end space-x-2")},m(l,s){N(l,e,s),J(t,e,null),f(e,a),J(r,e,null),i=!0},p(l,s){const p={};s[1]&524288&&(p.$$scope={dirty:s,ctx:l}),t.$set(p);const d={};s[1]&524288&&(d.$$scope={dirty:s,ctx:l}),r.$set(d)},i(l){i||(L(t.$$.fragment,l),L(r.$$.fragment,l),i=!0)},o(l){A(t.$$.fragment,l),A(r.$$.fragment,l),i=!1},d(l){l&&$(e),G(t),G(r)}}}function ht(n){let e,t,a,r,i="–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏",l,s,p,d,o,v,w,D,C,M,B,j;s=new fe({props:{variant:"primary",$$slots:{default:[xe]},$$scope:{ctx:n}}}),s.$on("click",n[18]),d=new Ye({props:{className:"mb-6",$$slots:{default:[tt]},$$scope:{ctx:n}}});const T=[at,nt],E=[];function m(u,_){return u[3]?0:1}return v=m(n),w=E[v]=T[v](n),C=new Ve({props:{open:n[4],title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é",$$slots:{footer:[pt],default:[ct]},$$scope:{ctx:n}}}),C.$on("close",n[33]),B=new Ve({props:{open:n[5],title:"–°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é",$$slots:{footer:[$t],default:[dt]},$$scope:{ctx:n}}}),B.$on("close",n[44]),{c(){e=R(),t=V("div"),a=V("div"),r=V("h1"),r.textContent=i,l=R(),Q(s.$$.fragment),p=R(),Q(d.$$.fragment),o=R(),w.c(),D=R(),Q(C.$$.fragment),M=R(),Q(B.$$.fragment),this.h()},l(u){Je("svelte-368f6i",document.head).forEach($),e=q(u),t=F(u,"DIV",{class:!0});var b=O(t);a=F(b,"DIV",{class:!0});var k=O(a);r=F(k,"H1",{class:!0,"data-svelte-h":!0}),me(r)!=="svelte-15s4uam"&&(r.textContent=i),l=q(k),K(s.$$.fragment,k),k.forEach($),p=q(b),K(d.$$.fragment,b),o=q(b),w.l(b),b.forEach($),D=q(u),K(C.$$.fragment,u),M=q(u),K(B.$$.fragment,u),this.h()},h(){document.title="–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ - Budget SaaS",U(r,"class","text-3xl font-bold text-gray-900"),U(a,"class","mb-8 flex items-center justify-between"),U(t,"class","px-4 sm:px-6 lg:px-8")},m(u,_){N(u,e,_),N(u,t,_),f(t,a),f(a,r),f(a,l),J(s,a,null),f(t,p),J(d,t,null),f(t,o),E[v].m(t,null),N(u,D,_),J(C,u,_),N(u,M,_),J(B,u,_),j=!0},p(u,_){const b={};_[1]&524288&&(b.$$scope={dirty:_,ctx:u}),s.$set(b);const k={};_[0]&1794|_[1]&524288&&(k.$$scope={dirty:_,ctx:u}),d.$set(k);let y=v;v=m(u),v===y?E[v].p(u,_):(Ie(),A(E[y],1,1,()=>{E[y]=null}),Be(),w=E[v],w?w.p(u,_):(w=E[v]=T[v](u),w.c()),L(w,1),w.m(t,null));const h={};_[0]&16&&(h.open=u[4]),_[0]&80|_[1]&524288&&(h.$$scope={dirty:_,ctx:u}),C.$set(h);const I={};_[0]&32&&(I.open=u[5]),_[0]&162|_[1]&524288&&(I.$$scope={dirty:_,ctx:u}),B.$set(I)},i(u){j||(L(s.$$.fragment,u),L(d.$$.fragment,u),L(w),L(C.$$.fragment,u),L(B.$$.fragment,u),j=!0)},o(u){A(s.$$.fragment,u),A(d.$$.fragment,u),A(w),A(C.$$.fragment,u),A(B.$$.fragment,u),j=!1},d(u){u&&($(e),$(t),$(D),$(M)),G(s),G(d),E[v].d(),G(C,u),G(B,u)}}}let de=50;const je=n=>({value:n.id,label:n.account_name}),He=n=>({value:n.id,label:n.name}),Oe=n=>({value:n.id,label:n.account_name}),Ne=n=>({value:n.id,label:n.name});function vt(n,e,t){let a=[],r=[],i=[],l=!1,s=!1,p=!1,d=null,o={account_id:"",category_id:"",amount:0,transaction_date:new Date().toISOString().split("T")[0],transaction_time:"",description:"",currency:"RUB",exchange_rate:1},v="",w="",D="",C=0,M=0;Ke(()=>{B(),j(),T()});async function B(){try{const c=await he.get("/accounts");t(1,r=c.data||[])}catch(c){oe.error(ve(c))}}async function j(){try{const c=await he.get("/categories");t(2,i=c.data||[])}catch(c){oe.error(ve(c))}}async function T(){t(3,l=!0);try{const c=new URLSearchParams;v&&c.append("date_from",v),w&&c.append("date_to",w),D&&c.append("account_id",D),c.append("limit",de.toString()),c.append("offset",C.toString());const te=await he.get(`/transactions?${c.toString()}`);t(0,a=te.data.items||[]),t(12,M=te.data.total||0)}catch(c){oe.error(ve(c))}finally{t(3,l=!1)}}function E(c){t(6,d={...c}),t(4,s=!0)}async function m(){if(d)try{d.id&&(await he.patch(`/transactions/${d.id}`,{category_id:d.category_id||null,confirmed:!0}),oe.success("–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞")),t(4,s=!1),T()}catch(c){oe.error(ve(c))}}async function u(c){if(confirm("–£–¥–∞–ª–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é?"))try{await he.delete(`/transactions/${c}`),oe.success("–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∞"),T()}catch(te){oe.error(ve(te))}}function _(){t(11,C=0),T()}function b(){t(7,o={account_id:"",category_id:"",amount:0,transaction_date:new Date().toISOString().split("T")[0],transaction_time:"",description:"",currency:"RUB",exchange_rate:1}),t(5,p=!0)}async function k(){if(!o.account_id||!o.amount){oe.error("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: —Å—á–µ—Ç –∏ —Å—É–º–º–∞");return}try{const c={account_id:o.account_id,amount:parseFloat(o.amount),transaction_date:new Date(o.transaction_date).toISOString(),transaction_time:o.transaction_time||"00:00:00",currency:o.currency||"RUB",exchange_rate:parseFloat(o.exchange_rate)||1};o.category_id&&(c.category_id=o.category_id),o.description&&(c.description=o.description),await he.post("/transactions",c),oe.success("–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞"),t(5,p=!1),T()}catch(c){oe.error(ve(c))}}function y(c){return c>=0?i.filter(te=>te.type==="income"):i.filter(te=>te.type==="expense")}function h(c){v=c,t(8,v)}function I(c){w=c,t(9,w)}function P(c){D=c,t(10,D)}const Y=(c,te)=>te.id===c.predicted_category_id,z=(c,te)=>te.id===c.category_id,Z=(c,te)=>te.id===c.account_id,x=c=>E(c),se=c=>u(c.id),be=()=>{t(11,C=Math.max(0,C-de)),T()},ge=()=>{t(11,C+=de),T()},$e=()=>t(4,s=!1);function ee(c){n.$$.not_equal(d.category_id,c)&&(d.category_id=c,t(6,d))}const H=()=>t(4,s=!1),ue=()=>t(5,p=!1);function g(c){n.$$.not_equal(o.account_id,c)&&(o.account_id=c,t(7,o))}function S(c){n.$$.not_equal(o.amount,c)&&(o.amount=c,t(7,o))}const ce=c=>{const te=parseFloat(c.currentTarget.value)||0,ze=y(te);o.category_id&&!ze.find(Ge=>Ge.id===o.category_id)&&t(7,o.category_id="",o)};function _e(c){n.$$.not_equal(o.category_id,c)&&(o.category_id=c,t(7,o))}function ie(c){n.$$.not_equal(o.transaction_date,c)&&(o.transaction_date=c,t(7,o))}function ke(c){n.$$.not_equal(o.transaction_time,c)&&(o.transaction_time=c,t(7,o))}function Ee(c){n.$$.not_equal(o.description,c)&&(o.description=c,t(7,o))}function De(c){n.$$.not_equal(o.currency,c)&&(o.currency=c,t(7,o))}function Ce(c){n.$$.not_equal(o.exchange_rate,c)&&(o.exchange_rate=c,t(7,o))}return[a,r,i,l,s,p,d,o,v,w,D,C,M,T,E,m,u,_,b,k,y,h,I,P,Y,z,Z,x,se,be,ge,$e,ee,H,ue,g,S,ce,_e,ie,ke,Ee,De,Ce,()=>t(5,p=!1)]}class Mt extends Xe{constructor(e){super(),Ze(this,e,vt,ht,Pe,{},null,[-1,-1])}}export{Mt as component};
