import{s as te,d as _,i as D,b as $,l as g,m as ne,g as E,c as v,e as T,o as q,j as B,h as k,p as se,f as U,t as P,n as R,r as G,q as ae,u as re,v as le,w as oe,a as ue,x as J}from"../chunks/zcCs4naO.js";import{S as ce,i as ie,d as H,t as C,a as w,c as Z,m as j,b as L,e as S,g as ee,f as fe}from"../chunks/CfCKwUYM.js";import{e as K}from"../chunks/im_KIqQT.js";import{a as O,t as I,g as Y}from"../chunks/Droe60yk.js";import{B as z}from"../chunks/Dx4fLEUM.js";import{C as de}from"../chunks/D2Ky6HrB.js";import{M as me}from"../chunks/BmRpZZ1K.js";import{I as pe}from"../chunks/BOJ5ACe9.js";function Q(l,e,t){const n=l.slice();return n[14]=e[t],n}function _e(l){let e;return{c(){e=P("Добавить банк")},l(t){e=U(t,"Добавить банк")},m(t,n){D(t,e,n)},d(t){t&&_(e)}}}function he(l){let e,t;return e=new de({props:{$$slots:{default:[ge]},$$scope:{ctx:l}}}),{c(){S(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){j(e,n,a),t=!0},p(n,a){const c={};a&131073&&(c.$$scope={dirty:a,ctx:n}),e.$set(c)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function $e(l){let e,t='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-19fpjb6"&&(e.innerHTML=t),this.h()},h(){g(e,"class","flex items-center justify-center h-64")},m(n,a){D(n,e,a)},p:R,i:R,o:R,d(n){n&&_(e)}}}function W(l){let e,t,n=l[14].name+"",a,c,s,r,f="Редактировать",o,d,i="Удалить",p,b,A;function y(){return l[8](l[14])}function V(){return l[9](l[14])}return{c(){e=k("tr"),t=k("td"),a=P(n),c=B(),s=k("td"),r=k("button"),r.textContent=f,o=B(),d=k("button"),d.textContent=i,p=B(),this.h()},l(m){e=v(m,"TR",{class:!0});var u=T(e);t=v(u,"TD",{class:!0});var h=T(t);a=U(h,n),h.forEach(_),c=E(u),s=v(u,"TD",{class:!0});var x=T(s);r=v(x,"BUTTON",{class:!0,"data-svelte-h":!0}),q(r)!=="svelte-mshx1v"&&(r.textContent=f),o=E(x),d=v(x,"BUTTON",{class:!0,"data-svelte-h":!0}),q(d)!=="svelte-l9t0gt"&&(d.textContent=i),x.forEach(_),p=E(u),u.forEach(_),this.h()},h(){g(t,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),g(r,"class","text-primary-600 hover:text-primary-900 mr-4"),g(d,"class","text-red-600 hover:text-red-900"),g(s,"class","px-6 py-4 whitespace-nowrap text-sm font-medium"),g(e,"class","hover:bg-gray-50")},m(m,u){D(m,e,u),$(e,t),$(t,a),$(e,c),$(e,s),$(s,r),$(s,o),$(s,d),$(e,p),b||(A=[J(r,"click",y),J(d,"click",V)],b=!0)},p(m,u){l=m,u&1&&n!==(n=l[14].name+"")&&ue(a,n)},d(m){m&&_(e),b=!1,oe(A)}}}function ge(l){let e,t,n,a='<tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Название</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Действия</th></tr>',c,s,r=K(l[0]),f=[];for(let o=0;o<r.length;o+=1)f[o]=W(Q(l,r,o));return{c(){e=k("div"),t=k("table"),n=k("thead"),n.innerHTML=a,c=B(),s=k("tbody");for(let o=0;o<f.length;o+=1)f[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var d=T(e);t=v(d,"TABLE",{class:!0});var i=T(t);n=v(i,"THEAD",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-1iodel4"&&(n.innerHTML=a),c=E(i),s=v(i,"TBODY",{class:!0});var p=T(s);for(let b=0;b<f.length;b+=1)f[b].l(p);p.forEach(_),i.forEach(_),d.forEach(_),this.h()},h(){g(n,"class","bg-gray-50"),g(s,"class","bg-white divide-y divide-gray-200"),g(t,"class","min-w-full divide-y divide-gray-200"),g(e,"class","overflow-x-auto")},m(o,d){D(o,e,d),$(e,t),$(t,n),$(t,c),$(t,s);for(let i=0;i<f.length;i+=1)f[i]&&f[i].m(s,null)},p(o,d){if(d&161){r=K(o[0]);let i;for(i=0;i<r.length;i+=1){const p=Q(o,r,i);f[i]?f[i].p(p,d):(f[i]=W(p),f[i].c(),f[i].m(s,null))}for(;i<f.length;i+=1)f[i].d(1);f.length=r.length}},d(o){o&&_(e),ae(f,o)}}}function X(l){let e,t,n;function a(s){l[11](s)}let c={label:"Название",required:!0};return l[3].name!==void 0&&(c.value=l[3].name),e=new pe({props:c}),re.push(()=>fe(e,"value",a)),{c(){S(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,r){j(e,s,r),n=!0},p(s,r){const f={};!t&&r&8&&(t=!0,f.value=s[3].name,le(()=>t=!1)),e.$set(f)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){C(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function be(l){let e,t,n=l[3]&&X(l);return{c(){n&&n.c(),e=G()},l(a){n&&n.l(a),e=G()},m(a,c){n&&n.m(a,c),D(a,e,c),t=!0},p(a,c){a[3]?n?(n.p(a,c),c&8&&w(n,1)):(n=X(a),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(ee(),C(n,1,1,()=>{n=null}),Z())},i(a){t||(w(n),t=!0)},o(a){C(n),t=!1},d(a){a&&_(e),n&&n.d(a)}}}function ve(l){let e;return{c(){e=P("Отмена")},l(t){e=U(t,"Отмена")},m(t,n){D(t,e,n)},d(t){t&&_(e)}}}function ke(l){let e;return{c(){e=P("Сохранить")},l(t){e=U(t,"Сохранить")},m(t,n){D(t,e,n)},d(t){t&&_(e)}}}function ye(l){let e,t,n,a,c;return t=new z({props:{variant:"secondary",$$slots:{default:[ve]},$$scope:{ctx:l}}}),t.$on("click",l[10]),a=new z({props:{variant:"primary",$$slots:{default:[ke]},$$scope:{ctx:l}}}),a.$on("click",l[6]),{c(){e=k("div"),S(t.$$.fragment),n=B(),S(a.$$.fragment),this.h()},l(s){e=v(s,"DIV",{slot:!0,class:!0});var r=T(e);L(t.$$.fragment,r),n=E(r),L(a.$$.fragment,r),r.forEach(_),this.h()},h(){g(e,"slot","footer"),g(e,"class","flex justify-end space-x-2")},m(s,r){D(s,e,r),j(t,e,null),$(e,n),j(a,e,null),c=!0},p(s,r){const f={};r&131072&&(f.$$scope={dirty:r,ctx:s}),t.$set(f);const o={};r&131072&&(o.$$scope={dirty:r,ctx:s}),a.$set(o)},i(s){c||(w(t.$$.fragment,s),w(a.$$.fragment,s),c=!0)},o(s){C(t.$$.fragment,s),C(a.$$.fragment,s),c=!1},d(s){s&&_(e),H(t),H(a)}}}function xe(l){var m;let e,t,n,a,c="Банки",s,r,f,o,d,i,p,b;r=new z({props:{variant:"primary",$$slots:{default:[_e]},$$scope:{ctx:l}}}),r.$on("click",l[4]);const A=[$e,he],y=[];function V(u,h){return u[1]?0:1}return o=V(l),d=y[o]=A[o](l),p=new me({props:{open:l[2],title:(m=l[3])!=null&&m.id?"Редактировать банк":"Создать банк",$$slots:{footer:[ye],default:[be]},$$scope:{ctx:l}}}),p.$on("close",l[12]),{c(){e=B(),t=k("div"),n=k("div"),a=k("h1"),a.textContent=c,s=B(),S(r.$$.fragment),f=B(),d.c(),i=B(),S(p.$$.fragment),this.h()},l(u){ne("svelte-13uaopa",document.head).forEach(_),e=E(u),t=v(u,"DIV",{class:!0});var x=T(t);n=v(x,"DIV",{class:!0});var M=T(n);a=v(M,"H1",{class:!0,"data-svelte-h":!0}),q(a)!=="svelte-1ntudek"&&(a.textContent=c),s=E(M),L(r.$$.fragment,M),M.forEach(_),f=E(x),d.l(x),x.forEach(_),i=E(u),L(p.$$.fragment,u),this.h()},h(){document.title="Банки - Budget SaaS",g(a,"class","text-3xl font-bold text-gray-900"),g(n,"class","mb-8 flex justify-between items-center"),g(t,"class","px-4 sm:px-6 lg:px-8")},m(u,h){D(u,e,h),D(u,t,h),$(t,n),$(n,a),$(n,s),j(r,n,null),$(t,f),y[o].m(t,null),D(u,i,h),j(p,u,h),b=!0},p(u,[h]){var F;const x={};h&131072&&(x.$$scope={dirty:h,ctx:u}),r.$set(x);let M=o;o=V(u),o===M?y[o].p(u,h):(ee(),C(y[M],1,1,()=>{y[M]=null}),Z(),d=y[o],d?d.p(u,h):(d=y[o]=A[o](u),d.c()),w(d,1),d.m(t,null));const N={};h&4&&(N.open=u[2]),h&8&&(N.title=(F=u[3])!=null&&F.id?"Редактировать банк":"Создать банк"),h&131084&&(N.$$scope={dirty:h,ctx:u}),p.$set(N)},i(u){b||(w(r.$$.fragment,u),w(d),w(p.$$.fragment,u),b=!0)},o(u){C(r.$$.fragment,u),C(d),C(p.$$.fragment,u),b=!1},d(u){u&&(_(e),_(t),_(i)),H(r),y[o].d(),H(p,u)}}}function we(l,e,t){let n=[],a=!1,c=!1,s=null;se(()=>{r()});async function r(){t(1,a=!0);try{const m=await O.get("/banks");t(0,n=m.data||[])}catch(m){I.error(Y(m))}finally{t(1,a=!1)}}function f(){t(3,s={name:""}),t(2,c=!0)}function o(m){t(3,s={id:m.id,name:m.name}),t(2,c=!0)}async function d(){if(!s||!s.name){I.error("Введите название банка");return}try{s.id?(await O.put(`/banks/${s.id}`,{name:s.name}),I.success("Банк обновлен")):(await O.post("/banks",{name:s.name}),I.success("Банк создан")),t(2,c=!1),r()}catch(m){I.error(Y(m))}}async function i(m){if(confirm("Удалить банк?"))try{await O.delete(`/banks/${m}`),I.success("Банк удален"),r()}catch(u){I.error(Y(u))}}const p=m=>o(m),b=m=>i(m.id),A=()=>t(2,c=!1);function y(m){l.$$.not_equal(s.name,m)&&(s.name=m,t(3,s))}return[n,a,c,s,f,o,d,i,p,b,A,y,()=>t(2,c=!1)]}class He extends ce{constructor(e){super(),ie(this,e,we,xe,te,{})}}export{He as component};
