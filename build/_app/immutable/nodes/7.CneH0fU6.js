import{s as Te,d as $,i as I,b as g,l as b,m as Be,g as C,c as y,e as T,o as Z,j as B,h as E,p as Me,f as J,t as K,n as de,r as oe,q as De,u as ne,v as ue,w as Ce,a as ae,x as ie}from"../chunks/zcCs4naO.js";import{S as Ae,i as Se,d as N,t as q,a as M,c as _e,m as j,b as F,e as O,g as me,f as se}from"../chunks/CfCKwUYM.js";import{e as ce}from"../chunks/im_KIqQT.js";import{a as X,t as Y,g as te}from"../chunks/Droe60yk.js";import{B as re}from"../chunks/Dx4fLEUM.js";import{C as he}from"../chunks/D2Ky6HrB.js";import{M as ge}from"../chunks/BmRpZZ1K.js";import{I as fe}from"../chunks/BOJ5ACe9.js";import{S as $e}from"../chunks/DK2GGeIu.js";function ve(u,t,e){const n=u.slice();return n[32]=t[e],n}function be(u,t,e){const n=u.slice();return n[35]=t[e],n}function qe(u){let t;return{c(){t=K("Добавить надкатегорию")},l(e){t=J(e,"Добавить надкатегорию")},m(e,n){I(e,t,n)},d(e){e&&$(t)}}}function Ie(u){let t;return{c(){t=K("Добавить категорию")},l(e){t=J(e,"Добавить категорию")},m(e,n){I(e,t,n)},d(e){e&&$(t)}}}function Ve(u){let t,e,n,r,c;return e=new he({props:{title:"Надкатегории",$$slots:{default:[Le]},$$scope:{ctx:u}}}),r=new he({props:{title:"Категории",$$slots:{default:[Ne]},$$scope:{ctx:u}}}),{c(){t=E("div"),O(e.$$.fragment),n=B(),O(r.$$.fragment),this.h()},l(a){t=y(a,"DIV",{class:!0});var l=T(t);F(e.$$.fragment,l),n=C(l),F(r.$$.fragment,l),l.forEach($),this.h()},h(){b(t,"class","space-y-6")},m(a,l){I(a,t,l),j(e,t,null),g(t,n),j(r,t,null),c=!0},p(a,l){const s={};l[0]&2|l[1]&128&&(s.$$scope={dirty:l,ctx:a}),e.$set(s);const o={};l[0]&3|l[1]&128&&(o.$$scope={dirty:l,ctx:a}),r.$set(o)},i(a){c||(M(e.$$.fragment,a),M(r.$$.fragment,a),c=!0)},o(a){q(e.$$.fragment,a),q(r.$$.fragment,a),c=!1},d(a){a&&$(t),N(e),N(r)}}}function He(u){let t,e='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div>';return{c(){t=E("div"),t.innerHTML=e,this.h()},l(n){t=y(n,"DIV",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-19fpjb6"&&(t.innerHTML=e),this.h()},h(){b(t,"class","flex items-center justify-center h-64")},m(n,r){I(n,t,r)},p:de,i:de,o:de,d(n){n&&$(t)}}}function ye(u){let t,e,n=u[35].name+"",r,c,a,l=(u[35].description||"-")+"",s,o,m,i,p="Редактировать",h,x,D="Удалить",V,w,z;function P(){return u[15](u[35])}function A(){return u[16](u[35])}return{c(){t=E("tr"),e=E("td"),r=K(n),c=B(),a=E("td"),s=K(l),o=B(),m=E("td"),i=E("button"),i.textContent=p,h=B(),x=E("button"),x.textContent=D,V=B(),this.h()},l(H){t=y(H,"TR",{class:!0});var _=T(t);e=y(_,"TD",{class:!0});var k=T(e);r=J(k,n),k.forEach($),c=C(_),a=y(_,"TD",{class:!0});var d=T(a);s=J(d,l),d.forEach($),o=C(_),m=y(_,"TD",{class:!0});var v=T(m);i=y(v,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(i)!=="svelte-1qnumpy"&&(i.textContent=p),h=C(v),x=y(v,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(x)!=="svelte-1ptsrtq"&&(x.textContent=D),v.forEach($),V=C(_),_.forEach($),this.h()},h(){b(e,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),b(a,"class","px-6 py-4 text-sm text-gray-500"),b(i,"class","text-primary-600 hover:text-primary-900 mr-4"),b(x,"class","text-red-600 hover:text-red-900"),b(m,"class","px-6 py-4 whitespace-nowrap text-sm font-medium"),b(t,"class","hover:bg-gray-50")},m(H,_){I(H,t,_),g(t,e),g(e,r),g(t,c),g(t,a),g(a,s),g(t,o),g(t,m),g(m,i),g(m,h),g(m,x),g(t,V),w||(z=[ie(i,"click",P),ie(x,"click",A)],w=!0)},p(H,_){u=H,_[0]&2&&n!==(n=u[35].name+"")&&ae(r,n),_[0]&2&&l!==(l=(u[35].description||"-")+"")&&ae(s,l)},d(H){H&&$(t),w=!1,Ce(z)}}}function Le(u){let t,e,n,r='<tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Название</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Описание</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Действия</th></tr>',c,a,l=ce(u[1]),s=[];for(let o=0;o<l.length;o+=1)s[o]=ye(be(u,l,o));return{c(){t=E("div"),e=E("table"),n=E("thead"),n.innerHTML=r,c=B(),a=E("tbody");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=y(o,"DIV",{class:!0});var m=T(t);e=y(m,"TABLE",{class:!0});var i=T(e);n=y(i,"THEAD",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-11umnde"&&(n.innerHTML=r),c=C(i),a=y(i,"TBODY",{class:!0});var p=T(a);for(let h=0;h<s.length;h+=1)s[h].l(p);p.forEach($),i.forEach($),m.forEach($),this.h()},h(){b(n,"class","bg-gray-50"),b(a,"class","bg-white divide-y divide-gray-200"),b(e,"class","min-w-full divide-y divide-gray-200"),b(t,"class","overflow-x-auto")},m(o,m){I(o,t,m),g(t,e),g(e,n),g(e,c),g(e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(a,null)},p(o,m){if(m[0]&20482){l=ce(o[1]);let i;for(i=0;i<l.length;i+=1){const p=be(o,l,i);s[i]?s[i].p(p,m):(s[i]=ye(p),s[i].c(),s[i].m(a,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}},d(o){o&&$(t),De(s,o)}}}function Ee(u){var G;let t,e,n=u[32].name+"",r,c,a,l,s=u[32].type==="income"?"Доход":"Расход",o,m,i,p,h=(((G=u[1].find(v))==null?void 0:G.name)||"-")+"",x,D,V,w,z="Редактировать",P,A,H="Удалить",_,k,d;function v(...L){return u[17](u[32],...L)}function U(){return u[18](u[32])}function R(){return u[19](u[32])}return{c(){t=E("tr"),e=E("td"),r=K(n),c=B(),a=E("td"),l=E("span"),o=K(s),i=B(),p=E("td"),x=K(h),D=B(),V=E("td"),w=E("button"),w.textContent=z,P=B(),A=E("button"),A.textContent=H,_=B(),this.h()},l(L){t=y(L,"TR",{class:!0});var S=T(t);e=y(S,"TD",{class:!0});var Q=T(e);r=J(Q,n),Q.forEach($),c=C(S),a=y(S,"TD",{class:!0});var ee=T(a);l=y(ee,"SPAN",{class:!0});var le=T(l);o=J(le,s),le.forEach($),ee.forEach($),i=C(S),p=y(S,"TD",{class:!0});var pe=T(p);x=J(pe,h),pe.forEach($),D=C(S),V=y(S,"TD",{class:!0});var f=T(V);w=y(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(w)!=="svelte-1ngmmcm"&&(w.textContent=z),P=C(f),A=y(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(A)!=="svelte-y5evzu"&&(A.textContent=H),f.forEach($),_=C(S),S.forEach($),this.h()},h(){b(e,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),b(l,"class",m="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(u[32].type==="income"?"bg-green-100 text-green-800":"bg-red-100 text-red-800")),b(a,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),b(p,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),b(w,"class","text-primary-600 hover:text-primary-900 mr-4"),b(A,"class","text-red-600 hover:text-red-900"),b(V,"class","px-6 py-4 whitespace-nowrap text-sm font-medium"),b(t,"class","hover:bg-gray-50")},m(L,S){I(L,t,S),g(t,e),g(e,r),g(t,c),g(t,a),g(a,l),g(l,o),g(t,i),g(t,p),g(p,x),g(t,D),g(t,V),g(V,w),g(V,P),g(V,A),g(t,_),k||(d=[ie(w,"click",U),ie(A,"click",R)],k=!0)},p(L,S){var Q;u=L,S[0]&1&&n!==(n=u[32].name+"")&&ae(r,n),S[0]&1&&s!==(s=u[32].type==="income"?"Доход":"Расход")&&ae(o,s),S[0]&1&&m!==(m="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(u[32].type==="income"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"))&&b(l,"class",m),S[0]&3&&h!==(h=(((Q=u[1].find(v))==null?void 0:Q.name)||"-")+"")&&ae(x,h)},d(L){L&&$(t),k=!1,Ce(d)}}}function Ne(u){let t,e,n,r='<tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Название</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Тип</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Надкатегория</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Действия</th></tr>',c,a,l=ce(u[0]),s=[];for(let o=0;o<l.length;o+=1)s[o]=Ee(ve(u,l,o));return{c(){t=E("div"),e=E("table"),n=E("thead"),n.innerHTML=r,c=B(),a=E("tbody");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=y(o,"DIV",{class:!0});var m=T(t);e=y(m,"TABLE",{class:!0});var i=T(e);n=y(i,"THEAD",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1tyz3h9"&&(n.innerHTML=r),c=C(i),a=y(i,"TBODY",{class:!0});var p=T(a);for(let h=0;h<s.length;h+=1)s[h].l(p);p.forEach($),i.forEach($),m.forEach($),this.h()},h(){b(n,"class","bg-gray-50"),b(a,"class","bg-white divide-y divide-gray-200"),b(e,"class","min-w-full divide-y divide-gray-200"),b(t,"class","overflow-x-auto")},m(o,m){I(o,t,m),g(t,e),g(e,n),g(e,c),g(e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(a,null)},p(o,m){if(m[0]&1283){l=ce(o[0]);let i;for(i=0;i<l.length;i+=1){const p=ve(o,l,i);s[i]?s[i].p(p,m):(s[i]=Ee(p),s[i].c(),s[i].m(a,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}},d(o){o&&$(t),De(s,o)}}}function we(u){let t,e,n,r,c,a,l,s,o,m,i,p,h;function x(_){u[21](_)}let D={label:"Название",required:!0};u[5].name!==void 0&&(D.value=u[5].name),e=new fe({props:D}),ne.push(()=>se(e,"value",x));function V(_){u[22](_)}let w={label:"Тип",required:!0,options:[{value:"income",label:"Доход"},{value:"expense",label:"Расход"}]};u[5].type!==void 0&&(w.value=u[5].type),c=new $e({props:w}),ne.push(()=>se(c,"value",V));function z(_){u[23](_)}let P={label:"Надкатегория",options:[{value:"",label:"Без надкатегории"},...u[1].map(xe)]};u[5].supercategory_id!==void 0&&(P.value=u[5].supercategory_id),s=new $e({props:P}),ne.push(()=>se(s,"value",z));function A(_){u[24](_)}let H={label:"Описание"};return u[5].description!==void 0&&(H.value=u[5].description),i=new fe({props:H}),ne.push(()=>se(i,"value",A)),{c(){t=E("div"),O(e.$$.fragment),r=B(),O(c.$$.fragment),l=B(),O(s.$$.fragment),m=B(),O(i.$$.fragment),this.h()},l(_){t=y(_,"DIV",{class:!0});var k=T(t);F(e.$$.fragment,k),r=C(k),F(c.$$.fragment,k),l=C(k),F(s.$$.fragment,k),m=C(k),F(i.$$.fragment,k),k.forEach($),this.h()},h(){b(t,"class","space-y-4")},m(_,k){I(_,t,k),j(e,t,null),g(t,r),j(c,t,null),g(t,l),j(s,t,null),g(t,m),j(i,t,null),h=!0},p(_,k){const d={};!n&&k[0]&32&&(n=!0,d.value=_[5].name,ue(()=>n=!1)),e.$set(d);const v={};!a&&k[0]&32&&(a=!0,v.value=_[5].type,ue(()=>a=!1)),c.$set(v);const U={};k[0]&2&&(U.options=[{value:"",label:"Без надкатегории"},..._[1].map(xe)]),!o&&k[0]&32&&(o=!0,U.value=_[5].supercategory_id,ue(()=>o=!1)),s.$set(U);const R={};!p&&k[0]&32&&(p=!0,R.value=_[5].description,ue(()=>p=!1)),i.$set(R)},i(_){h||(M(e.$$.fragment,_),M(c.$$.fragment,_),M(s.$$.fragment,_),M(i.$$.fragment,_),h=!0)},o(_){q(e.$$.fragment,_),q(c.$$.fragment,_),q(s.$$.fragment,_),q(i.$$.fragment,_),h=!1},d(_){_&&$(t),N(e),N(c),N(s),N(i)}}}function je(u){let t,e,n=u[5]&&we(u);return{c(){n&&n.c(),t=oe()},l(r){n&&n.l(r),t=oe()},m(r,c){n&&n.m(r,c),I(r,t,c),e=!0},p(r,c){r[5]?n?(n.p(r,c),c[0]&32&&M(n,1)):(n=we(r),n.c(),M(n,1),n.m(t.parentNode,t)):n&&(me(),q(n,1,1,()=>{n=null}),_e())},i(r){e||(M(n),e=!0)},o(r){q(n),e=!1},d(r){r&&$(t),n&&n.d(r)}}}function Fe(u){let t;return{c(){t=K("Отмена")},l(e){t=J(e,"Отмена")},m(e,n){I(e,t,n)},d(e){e&&$(t)}}}function Oe(u){let t;return{c(){t=K("Сохранить")},l(e){t=J(e,"Сохранить")},m(e,n){I(e,t,n)},d(e){e&&$(t)}}}function Ue(u){let t,e,n,r,c;return e=new re({props:{variant:"secondary",$$slots:{default:[Fe]},$$scope:{ctx:u}}}),e.$on("click",u[20]),r=new re({props:{variant:"primary",$$slots:{default:[Oe]},$$scope:{ctx:u}}}),r.$on("click",u[9]),{c(){t=E("div"),O(e.$$.fragment),n=B(),O(r.$$.fragment),this.h()},l(a){t=y(a,"DIV",{slot:!0,class:!0});var l=T(t);F(e.$$.fragment,l),n=C(l),F(r.$$.fragment,l),l.forEach($),this.h()},h(){b(t,"slot","footer"),b(t,"class","flex justify-end space-x-2")},m(a,l){I(a,t,l),j(e,t,null),g(t,n),j(r,t,null),c=!0},p(a,l){const s={};l[1]&128&&(s.$$scope={dirty:l,ctx:a}),e.$set(s);const o={};l[1]&128&&(o.$$scope={dirty:l,ctx:a}),r.$set(o)},i(a){c||(M(e.$$.fragment,a),M(r.$$.fragment,a),c=!0)},o(a){q(e.$$.fragment,a),q(r.$$.fragment,a),c=!1},d(a){a&&$(t),N(e),N(r)}}}function ke(u){let t,e,n,r,c,a,l;function s(p){u[27](p)}let o={label:"Название",required:!0};u[6].name!==void 0&&(o.value=u[6].name),e=new fe({props:o}),ne.push(()=>se(e,"value",s));function m(p){u[28](p)}let i={label:"Описание"};return u[6].description!==void 0&&(i.value=u[6].description),c=new fe({props:i}),ne.push(()=>se(c,"value",m)),{c(){t=E("div"),O(e.$$.fragment),r=B(),O(c.$$.fragment),this.h()},l(p){t=y(p,"DIV",{class:!0});var h=T(t);F(e.$$.fragment,h),r=C(h),F(c.$$.fragment,h),h.forEach($),this.h()},h(){b(t,"class","space-y-4")},m(p,h){I(p,t,h),j(e,t,null),g(t,r),j(c,t,null),l=!0},p(p,h){const x={};!n&&h[0]&64&&(n=!0,x.value=p[6].name,ue(()=>n=!1)),e.$set(x);const D={};!a&&h[0]&64&&(a=!0,D.value=p[6].description,ue(()=>a=!1)),c.$set(D)},i(p){l||(M(e.$$.fragment,p),M(c.$$.fragment,p),l=!0)},o(p){q(e.$$.fragment,p),q(c.$$.fragment,p),l=!1},d(p){p&&$(t),N(e),N(c)}}}function ze(u){let t,e,n=u[6]&&ke(u);return{c(){n&&n.c(),t=oe()},l(r){n&&n.l(r),t=oe()},m(r,c){n&&n.m(r,c),I(r,t,c),e=!0},p(r,c){r[6]?n?(n.p(r,c),c[0]&64&&M(n,1)):(n=ke(r),n.c(),M(n,1),n.m(t.parentNode,t)):n&&(me(),q(n,1,1,()=>{n=null}),_e())},i(r){e||(M(n),e=!0)},o(r){q(n),e=!1},d(r){r&&$(t),n&&n.d(r)}}}function Pe(u){let t;return{c(){t=K("Отмена")},l(e){t=J(e,"Отмена")},m(e,n){I(e,t,n)},d(e){e&&$(t)}}}function Re(u){let t;return{c(){t=K("Сохранить")},l(e){t=J(e,"Сохранить")},m(e,n){I(e,t,n)},d(e){e&&$(t)}}}function Ye(u){let t,e,n,r,c;return e=new re({props:{variant:"secondary",$$slots:{default:[Pe]},$$scope:{ctx:u}}}),e.$on("click",u[26]),r=new re({props:{variant:"primary",$$slots:{default:[Re]},$$scope:{ctx:u}}}),r.$on("click",u[13]),{c(){t=E("div"),O(e.$$.fragment),n=B(),O(r.$$.fragment),this.h()},l(a){t=y(a,"DIV",{slot:!0,class:!0});var l=T(t);F(e.$$.fragment,l),n=C(l),F(r.$$.fragment,l),l.forEach($),this.h()},h(){b(t,"slot","footer"),b(t,"class","flex justify-end space-x-2")},m(a,l){I(a,t,l),j(e,t,null),g(t,n),j(r,t,null),c=!0},p(a,l){const s={};l[1]&128&&(s.$$scope={dirty:l,ctx:a}),e.$set(s);const o={};l[1]&128&&(o.$$scope={dirty:l,ctx:a}),r.$set(o)},i(a){c||(M(e.$$.fragment,a),M(r.$$.fragment,a),c=!0)},o(a){q(e.$$.fragment,a),q(r.$$.fragment,a),c=!1},d(a){a&&$(t),N(e),N(r)}}}function Ge(u){var _,k;let t,e,n,r,c="Категории",a,l,s,o,m,i,p,h,x,D,V,w,z;s=new re({props:{variant:"secondary",$$slots:{default:[qe]},$$scope:{ctx:u}}}),s.$on("click",u[11]),m=new re({props:{variant:"primary",$$slots:{default:[Ie]},$$scope:{ctx:u}}}),m.$on("click",u[7]);const P=[He,Ve],A=[];function H(d,v){return d[2]?0:1}return p=H(u),h=A[p]=P[p](u),D=new ge({props:{open:u[3],title:(_=u[5])!=null&&_.id?"Редактировать категорию":"Создать категорию",$$slots:{footer:[Ue],default:[je]},$$scope:{ctx:u}}}),D.$on("close",u[25]),w=new ge({props:{open:u[4],title:(k=u[6])!=null&&k.id?"Редактировать надкатегорию":"Создать надкатегорию",$$slots:{footer:[Ye],default:[ze]},$$scope:{ctx:u}}}),w.$on("close",u[29]),{c(){t=B(),e=E("div"),n=E("div"),r=E("h1"),r.textContent=c,a=B(),l=E("div"),O(s.$$.fragment),o=B(),O(m.$$.fragment),i=B(),h.c(),x=B(),O(D.$$.fragment),V=B(),O(w.$$.fragment),this.h()},l(d){Be("svelte-1mq31vu",document.head).forEach($),t=C(d),e=y(d,"DIV",{class:!0});var U=T(e);n=y(U,"DIV",{class:!0});var R=T(n);r=y(R,"H1",{class:!0,"data-svelte-h":!0}),Z(r)!=="svelte-lcvrv8"&&(r.textContent=c),a=C(R),l=y(R,"DIV",{class:!0});var G=T(l);F(s.$$.fragment,G),o=C(G),F(m.$$.fragment,G),G.forEach($),R.forEach($),i=C(U),h.l(U),U.forEach($),x=C(d),F(D.$$.fragment,d),V=C(d),F(w.$$.fragment,d),this.h()},h(){document.title="Категории - Budget SaaS",b(r,"class","text-3xl font-bold text-gray-900"),b(l,"class","flex space-x-2"),b(n,"class","mb-8 flex justify-between items-center"),b(e,"class","px-4 sm:px-6 lg:px-8")},m(d,v){I(d,t,v),I(d,e,v),g(e,n),g(n,r),g(n,a),g(n,l),j(s,l,null),g(l,o),j(m,l,null),g(e,i),A[p].m(e,null),I(d,x,v),j(D,d,v),I(d,V,v),j(w,d,v),z=!0},p(d,v){var Q,ee;const U={};v[1]&128&&(U.$$scope={dirty:v,ctx:d}),s.$set(U);const R={};v[1]&128&&(R.$$scope={dirty:v,ctx:d}),m.$set(R);let G=p;p=H(d),p===G?A[p].p(d,v):(me(),q(A[G],1,1,()=>{A[G]=null}),_e(),h=A[p],h?h.p(d,v):(h=A[p]=P[p](d),h.c()),M(h,1),h.m(e,null));const L={};v[0]&8&&(L.open=d[3]),v[0]&32&&(L.title=(Q=d[5])!=null&&Q.id?"Редактировать категорию":"Создать категорию"),v[0]&42|v[1]&128&&(L.$$scope={dirty:v,ctx:d}),D.$set(L);const S={};v[0]&16&&(S.open=d[4]),v[0]&64&&(S.title=(ee=d[6])!=null&&ee.id?"Редактировать надкатегорию":"Создать надкатегорию"),v[0]&80|v[1]&128&&(S.$$scope={dirty:v,ctx:d}),w.$set(S)},i(d){z||(M(s.$$.fragment,d),M(m.$$.fragment,d),M(h),M(D.$$.fragment,d),M(w.$$.fragment,d),z=!0)},o(d){q(s.$$.fragment,d),q(m.$$.fragment,d),q(h),q(D.$$.fragment,d),q(w.$$.fragment,d),z=!1},d(d){d&&($(t),$(e),$(x),$(V)),N(s),N(m),A[p].d(),N(D,d),N(w,d)}}}const xe=u=>({value:u.id,label:u.name});function Je(u,t,e){let n=[],r=[],c=!1,a=!1,l=!1,s=null,o=null;Me(()=>{m(),i()});async function m(){try{const f=await X.get("/supercategories");e(1,r=f.data||[])}catch(f){Y.error(te(f))}}async function i(){e(2,c=!0);try{const f=await X.get("/categories");e(0,n=f.data||[])}catch(f){Y.error(te(f))}finally{e(2,c=!1)}}function p(){e(5,s={name:"",type:"expense",supercategory_id:"",description:""}),e(3,a=!0)}function h(f){e(5,s={...f}),e(3,a=!0)}async function x(){if(!s||!s.name){Y.error("Введите название категории");return}try{const f={name:s.name,type:s.type,supercategory_id:s.supercategory_id||null,description:s.description||null};s.id?(await X.put(`/categories/${s.id}`,f),Y.success("Категория обновлена")):(await X.post("/categories",f),Y.success("Категория создана")),e(3,a=!1),i()}catch(f){Y.error(te(f))}}async function D(f){if(confirm("Удалить категорию?"))try{await X.delete(`/categories/${f}`),Y.success("Категория удалена"),i()}catch(W){Y.error(te(W))}}function V(){e(6,o={name:"",description:""}),e(4,l=!0)}function w(f){e(6,o={...f}),e(4,l=!0)}async function z(){if(!o||!o.name){Y.error("Введите название надкатегории");return}try{const f={name:o.name.trim()};o.description&&o.description.trim()&&(f.description=o.description.trim()),o.id?(await X.put(`/supercategories/${o.id}`,f),Y.success("Надкатегория обновлена")):(await X.post("/supercategories",f),Y.success("Надкатегория создана")),e(4,l=!1),m()}catch(f){console.error("Error saving supercategory:",f);const W=te(f);console.error("Error message:",W),Y.error(W||"Не удалось создать надкатегорию")}}async function P(f){if(confirm("Удалить надкатегорию?"))try{await X.delete(`/supercategories/${f}`),Y.success("Надкатегория удалена"),m()}catch(W){Y.error(te(W))}}const A=f=>w(f),H=f=>P(f.id),_=(f,W)=>W.id===f.supercategory_id,k=f=>h(f),d=f=>D(f.id),v=()=>e(3,a=!1);function U(f){u.$$.not_equal(s.name,f)&&(s.name=f,e(5,s))}function R(f){u.$$.not_equal(s.type,f)&&(s.type=f,e(5,s))}function G(f){u.$$.not_equal(s.supercategory_id,f)&&(s.supercategory_id=f,e(5,s))}function L(f){u.$$.not_equal(s.description,f)&&(s.description=f,e(5,s))}const S=()=>e(3,a=!1),Q=()=>e(4,l=!1);function ee(f){u.$$.not_equal(o.name,f)&&(o.name=f,e(6,o))}function le(f){u.$$.not_equal(o.description,f)&&(o.description=f,e(6,o))}return[n,r,c,a,l,s,o,p,h,x,D,V,w,z,P,A,H,_,k,d,v,U,R,G,L,S,Q,ee,le,()=>e(4,l=!1)]}class st extends Ae{constructor(t){super(),Se(this,t,Je,Ge,Te,{},null,[-1,-1])}}export{st as component};
